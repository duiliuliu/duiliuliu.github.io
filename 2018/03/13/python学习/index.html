<!DOCTYPE html>
<html lang="zh-CN">

  
<head><meta name="generator" content="Hexo 3.8.0">

<script>
var egg = " \
                                                                     \n\
                              ..                                       \n\
                            .' @`._                                    \n\
             ~       ...._.'  ,__.-;                                   \n\
          _..------/`           .-'    ~                               \n\
         :     __./'       ,  .'-'--.._                                \n\
      ~   `---(.-'''---.    \`._       `.   ~                           \n\
        _.--'(  .______.'.-' `-.`        `.                            \n\
       :      `-..____`-.                  ;                           \n\
       `.             ````  ç¨»èŠ±é¦™é‡Œè¯´ä¸°å¹´ï¼Œ  ;   ~                     \n\
         `-.__           å¬å–äººç”Ÿç»éªŒã€‚  __.-'                          \n\
              ````-----.......-----'''    ~                            \n\
           ~                   ~                                       \n\
*-* *-* *-* *-* *-* *-* *-* *-* *-* *-* *-* *-* *-* *-* *-*            \n\
"
</script>

  <meta charset="utf-8">
  <meta name="author" content="å¯¹å…­, pengrui55555@163.com">
  
  
  
  <title>pythonå­¦ä¹  | Duiliuliu</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="python,python,">
  

  <script>
    console.log('\n%c github' + '%c ğŸ‰ https://github.com/duiliuliuğŸ‰\n' + '\n%c ç®€å† ' + '%c ğŸ” æ›´æ–°ä¸€ä¸‹ï¼Œé©¬ä¸Šæ›¿æ¢ğŸ”  \n' , 'color: #fadfa3; background: #030307; padding:3px 0;', '', 'color: #fadfa3; background: #030307; padding:3px 0;', '');
    // console.log('\n\n%c '+egg,'color: #fadfa3; background: #030307; padding:3px 0;')
    console.log("%cé‚£å°±è¿™æ ·å§", "padding:300px 600px;line-height:120px;background:url('https://cdn.dribbble.com/users/285475/screenshots/3347233/business_fella.gif') no-repeat;");
  </script>

  
    <meta name="description" content="éšç¬”">
  

  

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/icon/iconfont.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">

  <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
  <script src="/js/util.js"></script>
<script src="/js/valine.min.js"></script>

  

  
    <link href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js" async></script>
  

  
    <link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">
  
  
  
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script>
  

</head>

  <body>

    

    <div id="app">

      <div class="header-wrap">
  <header>
    <div class="site-brand">
      <div class="site-title">
        <a href="/"><svg t="1524919571304" class="icon" style="margin-top: 5;margin-bottom: -5;margin-right: 10" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1405" xmlns:xlink="http://www.w3.org/1999/xlink" width="55" height="40"><defs><style type="text/css"/></defs><path d="M519.391852 655.664004l5.143137 0 0 0.765433-5.143137 0L519.391852 655.664004 519.391852 655.664004zM461.986421 953.196421l2.953262 1.055029c-7.259334-5.752004-25.818015-19.157315-49.984415-27.129894-28.747741-9.475815-71.581292-12.96529-112.364137 24.231891-0.464581 0.427742-1.047866 0.567935-1.685385 0.405229-9.751085-2.39249-51.969629-106.711394-89.576131-204.463742-2.042519 1.379417-4.027733 2.939959-6.100952 4.581342-3.653203 2.885723-7.614421 5.993504-12.480242 8.460696 47.004547 117.482715 94.16566 232.4307 101.068883 239.10368C336.773651 908.386866 394.807393 929.148725 461.986421 953.196421L461.986421 953.196421zM743.040539 950.431447c-0.64366 0.153496-1.221828 0.01842-1.685385-0.413416-40.797172-37.208437-83.647095-33.721009-112.413256-24.245194-24.045649 7.922437-42.522466 21.217231-49.841152 26.997887l0.271176-0.100284c62.594617-22.972201 127.316687-46.734394 170.756035 45.327348 6.707772-6.489808 51.394531-115.128087 97.024777-229.021044-0.511653-0.23536-1.004887-0.449231-1.455141-0.572028-7.698333-2.072195-13.239536-5.879917-17.913998-9.841136C791.466458 852.460112 752.374114 948.137195 743.040539 950.431447L743.040539 950.431447zM516.283048 657.190777l-0.227174-0.261966c-17.194614-19.894096-173.199691-193.161325-353.35377-152.168702-1.26583 1.962701 8.032954 21.381983 17.873066 39.153742l31.232328-0.881067-16.154935-28.411073 1.083681-0.173962c104.879676-16.950044 280.193517 111.976304 314.27166 137.992841l-0.839111 1.191128c0.949628 0.539282 1.882883 1.083681 2.788509 1.62501l1.503237 0.8913-1.678222 0.493234c-0.561795 0.165776-1.158383 0.98749-1.158383 2.176572l8.861832 291.0027c0 1.331321 0.73678 2.302439 1.391696 2.302439l1.596358 0c0.655939 0 1.39272-0.971118 1.39272-2.276856l8.862855-290.721291c0-1.109264-0.585331-1.935072-1.387603-1.935072l-3.568269 0 2.320858-1.413186c39.282678-23.985274 119.364575-51.532677 204.024743-70.176292 67.964928-14.969946 145.82011-25.104771 160.492274-8.645914l0.308015 0.339738-0.156566 0.429789c-1.726318 4.714372-15.611559 42.691311-34.417881 92.735078 7.316639 1.836835 15.287171 4.197602 22.308075 6.879688 19.531845-49.306986 37.231973-94.376461 49.724495-126.388549-193.349613-19.583011-353.160365 72.461335-397.590274 101.183494l-0.877997-1.251503c47.767933-36.480866 211.434503-154.25113 312.301795-137.948839l1.087774 0.173962-16.152888 28.373211 31.231305 0.813528c9.833973-17.700127 19.134803-37.052894 17.793248-39.065737-179.497117-40.803311-336.053756 133.669372-353.312838 153.699568l-0.233314 0.268106-1.399883 0 0-0.76748-1.685385 0-5.139044 0-1.676176 0 0 0.76748-1.436722 0L516.287141 657.190777zM148.189575 578.905806l-0.155543-0.429789 0.302899-0.339738c14.607696-16.381086 92.526323-6.441713 160.580279 8.316409 81.782631 17.73799 159.444409 43.61638 200.1239 66.535369-46.01808-29.54592-205.276247-120.142288-398.47134-100.571556 11.655458 29.860075 27.838022 71.071685 45.808302 116.484991 7.874341-2.036379 16.295128-3.63376 23.423479-4.684696C162.431951 617.877399 149.827889 583.38891 148.189575 578.905806L148.189575 578.905806zM132.757095 687.280072c-0.661056 3.91517 1.546216 7.232728 2.920516 8.857738 3.337002 3.950985 7.864108 5.516644 9.336646 4.588505 12.595876-7.907087 32.694633-14.82566 59.738569-20.556175 3.251044-0.691755 12.350283-3.613294 11.516288-7.858992-1.093914-5.564739-9.55461-6.729262-16.458857-6.729262-2.217505 0-4.13518 0.121773-5.285377 0.193405-0.446162 0.027629-0.788969 0.048095-1.01205 0.060375-10.218736 0.349971-37.748742 4.875031-52.061726 11.208273C137.895115 678.619832 133.426337 683.335227 132.757095 687.280072L132.757095 687.280072zM139.60813 715.676819c1.680269 5.915733 4.780887 8.92016 9.213849 8.92016 3.095501 0 5.754051-1.471514 6.494924-1.922792l0.682545-0.413416c6.164397-3.774977 24.920576-15.263635 53.91391-18.61701 12.890588-1.488911 27.972075-7.912204 27.364231-13.657045-0.200568-1.944282-0.806365-7.836479-13.252839-7.836479-6.547113 0-14.192234 1.555425-20.801768 3.065825-15.765055 3.62762-42.147936 11.713786-56.292074 17.975397C143.670655 704.632275 137.984143 709.941188 139.60813 715.676819L139.60813 715.676819zM218.057853 707.125049c-0.329505 0.039909-0.610914 0.075725-0.839111 0.098237-13.143345 1.228991-37.343513 7.423063-59.398832 18.119683-3.426029 1.664919-7.2798 5.961782-7.525394 9.998725-0.277316 4.604878 1.490957 7.504928 3.0208 9.127891 2.305509 2.455935 5.195326 3.327792 7.132444 3.327792 0.624217 0 1.181919-0.088004 1.659803-0.251733 9.397021-3.317559 16.104793-7.123234 22.596647-10.800997 5.963829-3.384074 12.132318-6.879688 20.165272-9.809413 0.285502-0.107447 1.013073-0.303922 2.061962-0.587378 20.999266-5.609765 23.64042-9.920954 23.344684-11.992125-0.727571-5.110391-3.53757-7.486508-8.836249-7.486508C220.122885 706.869223 218.927663 707.014532 218.057853 707.125049L218.057853 707.125049zM203.405131 732.825384l-0.410346 0.148379c-9.522887 3.355421-15.303544 7.039323-26.811646 14.386662-1.992377 1.2689-4.151553 2.648316-6.528694 4.151553-1.651616 1.041726-2.614547 2.178619-2.861164 3.37998-0.23536 1.167592 0.166799 2.520403 1.200338 4.019547 2.675946 3.873214 4.740978 4.323469 6.067182 4.323469l0 0c1.373277 0 2.78237-0.572028 4.14746-1.119497 0.998747-0.402159 2.034333-0.819668 3.072989-1.019213 9.760295-1.889023 16.008602-6.829546 22.056342-11.612479 2.744507-2.166339 5.335519-4.219091 8.185426-5.938246 0.172939-0.106424 0.397043-0.234337 0.665149-0.385786 1.984191-1.134847 7.261381-4.14746 7.975649-7.846712 0.280386-1.480724-0.189312-2.967588-1.441838-4.53734-0.436952-0.545422-1.512447-0.849344-3.037173-0.849344C211.464691 729.925335 205.399555 732.106 203.405131 732.825384L203.405131 732.825384zM840.178903 669.444868c-1.847068-0.25378-5.28026-0.727571-9.035794-0.727571-5.2864 0-11.860119 0.985444-13.140275 5.67014-1.133823 4.168949 7.723915 7.740288 10.924817 8.662287 26.551726 7.67889 46.101991 16.031115 58.096163 24.825408 0.320295 0.234337 0.816598 0.36225 1.431605 0.36225 2.163269 0 5.812379-1.608637 8.601912-4.682649 2.304486-2.530636 3.422959-5.446036 3.157923-8.204869-0.378623-3.985778-4.498454-9.014304-7.928576-10.842952-13.818727-7.351432-40.947598-13.848403-51.112098-14.938224C840.951499 669.544129 840.613808 669.500127 840.178903 669.444868L840.178903 669.444868zM884.934223 710.188828c-13.651928-7.259334-39.383986-17.234523-54.844096-21.988804-7.506974-2.300392-16.116049-4.657067-23.052019-4.657067-8.991792 0-10.737552 3.967358-11.266601 6.949272-1.013073 5.688559 13.563924 13.187347 26.307156 15.603373 28.65462 5.432733 46.536896 18.237363 52.40965 22.449291l0.666172 0.471744c0.797156 0.565888 3.65218 2.413979 7.014764 2.413979 4.086062 0 7.169283-2.778276 9.166777-8.258081C893.371382 717.571982 888.080889 711.866027 884.934223 710.188828L884.934223 710.188828zM872.474446 731.498156c-21.234627-12.267395-44.921095-20.191878-57.945737-22.361287-0.220011-0.035816-0.49528-0.094144-0.812505-0.155543-1.087774-0.217964-2.735297-0.547469-4.476965-0.547469-4.53734 0-7.231705 2.248204-8.238638 6.873548-0.444115 2.044566 1.88186 6.53995 22.425755 13.646811 1.02126 0.352017 1.730411 0.605797 2.00875 0.727571 7.798617 3.507894 13.69593 7.440459 19.404955 11.246135 6.206352 4.14132 12.619412 8.4126 21.75549 12.403494 0.584308 0.255827 1.324158 0.387833 2.145873 0.387833 4.308119 0 10.416234-3.63376 10.512425-11.70253C879.301945 737.969545 875.775632 733.406622 872.474446 731.498156L872.474446 731.498156zM826.860573 735.851301l-0.397043-0.173962c-5.692652-2.532683-9.987468-3.815909-12.769838-3.815909-0.799202 0-1.856277 0.11768-2.357697 0.653893-1.363044 1.480724-1.939165 2.923586-1.765203 4.420683 0.442068 3.739161 5.485945 7.125281 7.386224 8.396227 0.254803 0.176009 0.468674 0.318248 0.633427 0.431835 2.719948 1.922792 5.154393 4.155646 7.739265 6.52153 5.685489 5.202489 11.559267 10.585079 21.155832 13.168927 1.02433 0.276293 2.028193 0.76748 2.997264 1.245364 1.429559 0.701988 2.912329 1.425466 4.411473 1.425466 1.941212 0 3.90596-1.264806 6.006807-3.883447 1.137916-1.423419 1.638313-2.744507 1.487887-3.921309-0.159636-1.218758-1.035586-2.424212-2.610454-3.581572-2.254344-1.664919-4.296863-3.189645-6.186909-4.594645C841.634044 743.983515 836.128657 739.886197 826.860573 735.851301L826.860573 735.851301zM826.860573 735.851301" fill="#399ea8" p-id="1406"/><path d="M135.362432 563.761897 276.571525 933.502893 520.485767 949.820534 769.2689 928.898015 907.408073 569.735959 772.338818 563.761897 709.408557 592.759325 655.688052 602.819448 629.594767 611.177813 580.352249 626.183576 541.605783 641.875976 528.7725 657.190777 524.536013 656.429437 462.567659 626.183576 360.990193 594.972736 219.7811 563.761897Z" fill="#399ea8" p-id="1407"/><path d="M255.660262 315.224358c0 67.713194 26.611078 129.415488 70.39835 175.036525C182.678064 546.322713 83.941296 669.785629 83.941296 846.798159c0 160.327522 849.423963 184.136787 858.580506 0 8.902764-177.295985-94.468558-301.329906-241.517659-357.140003 43.214221-45.591361 69.799716-106.750279 69.799716-174.46552 0-140.746558-115.361401-254.883061-257.57231-254.883061S255.660262 174.446078 255.660262 315.224358L255.660262 315.224358zM312.896848 315.224358c0-109.611443 89.580225-198.247156 200.334701-198.247156 110.7555 0 200.334701 88.661296 200.334701 198.247156 0 79.30316-47.219441 147.848303-115.361401 179.556469C762.765789 532.729114 885.28624 650.555659 885.28624 825.02118c0 134.539182-744.106312 127.439484-744.106312 0 0-174.46552 122.493845-292.260343 287.054785-330.240353C360.118336 463.072661 312.896848 394.527518 312.896848 315.224358L312.896848 315.224358zM312.896848 315.224358" fill="#399ea8" p-id="1408"/><path d="M140.11262 579.11149 162.113703 626.183576 204.58091 566.575989 168.765193 563.761897Z" fill="#399ea8" p-id="1409"/><path d="M879.780853 641.875976 912.012951 574.340837 879.780853 563.761897 844.477812 563.761897 816.850591 569.736982Z" fill="#399ea8" p-id="1410"/></svg>Duiliuliu</a>
      </div>
    </div>
    <nav class="site-navigation">
      <ul class="nav-menu">
      
        <li class="nav-item" data-path="/">
          
            
            <a href="/" target="_self">
             <img src="/icon/ä¸»é¡µ.svg">
              ä¸»é¡µ
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/archives/">
          
            
            <a href="/archives/" target="_self">
             <img src="/icon/å½’æ¡£.svg">
              å½’æ¡£
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/categories/">
          
            
            <a href="/categories/" target="_self">
             <img src="/icon/åˆ†ç±».svg">
              åˆ†ç±»
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/tags/">
          
            
            <a href="/tags/" target="_self">
             <img src="/icon/æ ‡ç­¾.svg">
              æ ‡ç­¾
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/about/">
          
            
            <a href="/about/" target="_self">
             <img src="/icon/å…³äºæˆ‘.svg">
              å…³äº
            </a>
          
        </li>
      
      <li class="nav-item">
         <div id="search-wrapper">
            <input type="search" id="nav-search-btn" placeholder="Search" value>
            <div class="search-panel in" id="search-result">
              <ul id="search-result-list">
              </ul>
            </div>
         </div>
      </li>
      </ul>
    </nav>
    <i class="iconfont icon-menu"></i>
  </header>
</div>

<script>
  let links = document.querySelectorAll('.nav-item');
  for(let link of links){
    let childrenLink = link.querySelector('ul');
    link.addEventListener('mouseenter', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown active";
      }
    })
    link.addEventListener('mouseleave', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown";
      }
    })
  }
  let rootRealPath = getRealPath(window.location.pathname, true);
  for(let link of links) {
    let linkPath = link.getAttribute("data-path");
    if(linkPath && getRealPath(linkPath, true) === rootRealPath) {
      link.className = "nav-item hover";
    }
  }

  let iconMenu = document.querySelector("i.iconfont.icon-menu"),
    iconMenuClicked = false;
  let navDOM = document.querySelector("nav.site-navigation");
  iconMenu.addEventListener("click", () => {
    iconMenuClicked 
      ? navDOM.className = "site-navigation active"
      : navDOM.className = "site-navigation";
    iconMenuClicked = !iconMenuClicked;
  })
</script>

      








<div class="container post-index">

  

<div class="post">
  <h1 class="article-title">
    <span>pythonå­¦ä¹ </span>
  </h1>
  <div class="article-top-meta">
    <span>
      å‘å¸ƒ : 
      2018-03-13
    </span>
    
      <span>
        åˆ†ç±» : 
          <a href="/categories/python/">
            python
          </a>
      </span>
    
    
      <span>
        æµè§ˆ : <span class="article-timer" data-identity="pythonå­¦ä¹ "></span>
      </span>
    
  </div>

  

  <div class="article-content">
    <div class="markdown-body">
      <h2 id="Python-åŸºç¡€"><a href="#Python-åŸºç¡€" class="headerlink" title="Python åŸºç¡€"></a>Python åŸºç¡€</h2><p>python æ˜¯ä¸€é—¨æ¯”è¾ƒæµè¡Œçš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œ æ˜¯ä¸€é—¨è§£é‡Šå‹è¯­è¨€</p>
<ul>
<li><p>è§£é‡Šå‹<br>è§£é‡Šæ€§è¯­è¨€é€šå¸¸æŠŠæºç¨‹åºç¼–è¯‘æˆä¸­é—´ä»£ç ï¼Œç„¶åç”¨è§£é‡Šå™¨æŠŠä¸­é—´ä»£ç ä¸€æ¡æ¡ç¿»è¯‘æˆç›®æ ‡æœºå™¨ä»£ç ï¼Œä¸€æ¡æ¡æ‰§è¡Œã€‚</p>
<p>Pythonçš„å·¥ä½œè¿‡ç¨‹ï¼šå…ˆæŠŠä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œåœ¨å¯¹å­—èŠ‚ç è§£é‡Šæ‰§è¡Œã€‚å­—èŠ‚ç åœ¨pythonè™šæ‹Ÿæœºç¨‹åºé‡Œå¯¹åº”çš„æ˜¯PyCodeObjectå¯¹è±¡ï¼Œpycæ–‡ä»¶æ˜¯å­—èŠ‚ç åœ¨ç£ç›˜ä¸Šçš„è¡¨ç°å½¢å¼ã€‚</p>
</li>
<li><p>ç¼–è¯‘å‹<br>ç¼–è¯‘æ€§è¯­è¨€å†™çš„ç¨‹åºåœ¨è¢«æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦ä¸€ä¸ªä¸“é—¨çš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒæŠŠç¨‹åºç¼–è¯‘æˆä¸ºæœºå™¨è¯­è¨€çš„æ–‡ä»¶ï¼Œæ¯”å¦‚exeæ–‡ä»¶ï¼Œä»¥åè¦è¿è¡Œçš„è¯å°±ä¸ç”¨é‡æ–°ç¿»è¯‘äº†ï¼Œç›´æ¥ä½¿ç”¨ç¼–è¯‘çš„ç»“æœå°±è¡Œäº†ï¼ˆexeæ–‡ä»¶ï¼‰ï¼Œå› ä¸ºç¿»è¯‘åªåšäº†ä¸€æ¬¡ï¼Œè¿è¡Œæ—¶ä¸éœ€è¦ç¿»è¯‘ï¼Œæ‰€ä»¥ç¼–è¯‘å‹è¯­è¨€çš„ç¨‹åºæ‰§è¡Œæ•ˆç‡é«˜</p>
<p>Javaåˆ™æ˜¯ç¼–è¯‘å‹è¯­è¨€ã€‚ç¼–è¯‘ä¸ºå­—èŠ‚ç æ–‡ä»¶(.class)ï¼Œç„¶åä¼šç»jvmå¹³å°ç¼–è¯‘ä¸ºç›®æ ‡æœºå™¨ä»£ç </p>
</li>
<li><p>å­—èŠ‚ç     æ˜“è·¨å¹³å°è¿ç§»</p>
</li>
<li>æœºå™¨ç     è¿è¡Œå¿«é€Ÿ</li>
</ul>
<h3 id="Python-ç®€æ˜çº¦å®š"><a href="#Python-ç®€æ˜çº¦å®š" class="headerlink" title="Python ç®€æ˜çº¦å®š"></a>Python ç®€æ˜çº¦å®š</h3><ul>
<li>ç¼–ç <ul>
<li>é€šå¸¸ä½¿ç”¨ UDF-8 ç¼–ç </li>
<li>Python2 é—ç•™çš„ä¹ æƒ¯ï¼Œ æ–‡ä»¶å¤´éƒ¨åŠ å…¥ # -*- coding=utf-8 -*-</li>
</ul>
</li>
<li><p>ä»£ç æ ¼å¼</p>
<ul>
<li>ç¼©è¿›<br>ä¸€èˆ¬ä½¿ç”¨å››ä¸ªç©ºæ ¼è¿›è¡Œç¼©è¿›(javascript è§„èŒƒä¸º 2 ä¸ªç©ºæ ¼)</li>
<li>è¡Œå®½<br>æ¯è¡Œä»£ç ä¸€èˆ¬ä¸åº”è¿‡é•¿ï¼Œå¤ªé•¿å¯èƒ½æ˜¯è®¾è®¡æœ‰ç¼ºé™·</li>
<li>å¼•å·<br>å•å¼•å·å’ŒåŒå¼•å·éƒ½å¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²<br>ä¸€èˆ¬å­—å…¸ key ä½¿ç”¨å•å¼•å·</li>
<li><p>ç©ºè¡Œ<br>æ¨¡å—çº§å‡½æ•°å’Œç±»å®šä¹‰ä¹‹é—´ç©ºä¸¤è¡Œï¼›<br>ç±»æˆå‘˜å‡½æ•°ä¹‹é—´ç©ºä¸€è¡Œï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def hello(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>import è¯­å¥<br>import è¯­å¥åº”è¯¥åˆ†è¡Œä¹¦å†™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># æ­£ç¡®çš„å†™æ³•</span><br><span class="line">import os</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line"># ä¸æ¨èçš„å†™æ³•</span><br><span class="line">import sys,os</span><br><span class="line"></span><br><span class="line"># æ­£ç¡®çš„å†™æ³•</span><br><span class="line">from subprocess import Popen, PIPE</span><br></pre></td></tr></table></figure>
<p>import è¯­å¥åº”è¯¥ä½¿ç”¨ absolute import</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æ­£ç¡®çš„å†™æ³•</span><br><span class="line">from foo.bar import Bar</span><br><span class="line"></span><br><span class="line"># ä¸æ¨èçš„å†™æ³•</span><br><span class="line">from ..bar import Bar</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç©ºæ ¼<br>è¿ç®—ç¬¦å‰åç©ºæ ¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># æ­£ç¡®çš„å†™æ³•</span><br><span class="line">i = i + 1</span><br><span class="line">submitted += 1</span><br><span class="line">x = x * 2 - 1</span><br><span class="line">hypot2 = x * x + y * y</span><br><span class="line">c = (a + b) * (a - b)</span><br><span class="line"></span><br><span class="line"># ä¸æ¨èçš„å†™æ³•</span><br><span class="line">i=i+1</span><br><span class="line">submitted +=1</span><br><span class="line">x = x*2 - 1</span><br><span class="line">hypot2 = x*x + y*y</span><br><span class="line">c = (a+b) * (a-b)</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¢è¡Œ<br>ä½¿ç”¨åæ–œæ \æ¢è¡Œï¼ŒäºŒå…ƒè¿ç®—ç¬¦+ .ç­‰åº”å‡ºç°åœ¨è¡Œæœ«ï¼›é•¿å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ç”¨æ­¤æ³•æ¢è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">session.query(MyTable).\</span><br><span class="line">    filter_by(id=1).\</span><br><span class="line">    one()</span><br><span class="line"></span><br><span class="line">print &apos;Hello, &apos;\</span><br><span class="line">    &apos;%s %s!&apos; %\</span><br><span class="line">    (&apos;Harry&apos;, &apos;Potter&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>docstring(æ–‡æ¡£æ³¨é‡Š)<br>ä¸€èˆ¬å…¬å…±æ¨¡å—ã€å‡½æ•°ã€ç±»ã€æ–¹æ³•ï¼Œéƒ½åº”è¯¥å†™ docstring</p>
</li>
<li><p>æ³¨é‡Š</p>
<ul>
<li><p>â€œ#â€å·åç©ºä¸€æ ¼ï¼Œæ®µè½ä»¶ç”¨ç©ºè¡Œåˆ†å¼€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># å—æ³¨é‡Š</span><br><span class="line"># å—æ³¨é‡Š</span><br><span class="line">#</span><br><span class="line"># å—æ³¨é‡Š</span><br><span class="line"># å—æ³¨é‡Š</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–‡æ¡£æ³¨é‡Š æ–‡æ¡£æ³¨é‡Šä»¥ â€œâ€â€ å¼€å¤´å’Œç»“å°¾, é¦–è¡Œä¸æ¢è¡Œ, å¦‚æœ‰å¤šè¡Œ, æœ«è¡Œå¿…éœ€æ¢è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;Example docstrings.</span><br><span class="line"></span><br><span class="line">This module demonstrates documentation as specified by the `Google Python</span><br><span class="line">Style Guide`_. Docstrings may extend over multiple lines. Sections are created</span><br><span class="line">with a section header and a colon followed by a block of indented text.</span><br><span class="line"></span><br><span class="line">Example:</span><br><span class="line">    Examples can be given using either the ``Example`` or ``Examples``</span><br><span class="line">    sections. Sections support any reStructuredText formatting, including</span><br><span class="line">    literal blocks::</span><br><span class="line"></span><br><span class="line">        $ python example_google.py</span><br><span class="line"></span><br><span class="line">Section breaks are created by resuming unindented text. Section breaks</span><br><span class="line">are also implicitly created anytime a new section starts.</span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å‘½åè§„èŒƒ</p>
<ul>
<li><p>æ¨¡å—<br>æ¨¡å—åä¸€èˆ¬å°å†™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># æ­£ç¡®çš„æ¨¡å—å</span><br><span class="line">import decoder</span><br><span class="line">import html_parser</span><br><span class="line"></span><br><span class="line"># ä¸æ¨èçš„æ¨¡å—å</span><br><span class="line">import Decoder</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç±»å<br>ç±»åä½¿ç”¨é©¼å³°(CamelCase)å‘½åé£æ ¼ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œç§æœ‰ç±»å¯ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿å¼€å¤´</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class Farm():</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class AnimalFarm(Farm):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class _PrivateFarm(Farm):</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<p>å°†ç›¸å…³çš„ç±»å’Œé¡¶çº§å‡½æ•°æ”¾åœ¨åŒä¸€ä¸ªæ¨¡å—é‡Œ. ä¸åƒ Java, æ²¡å¿…è¦é™åˆ¶ä¸€ä¸ªç±»ä¸€ä¸ªæ¨¡å—.</p>
</li>
<li><p>å‡½æ•°<br>å‡½æ•°åä¸€å¾‹å°å†™ï¼Œå¦‚æœ‰å¤šä¸ªå•è¯ï¼Œç”¨ä¸‹åˆ’çº¿éš”å¼€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def run():</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">def run_with_env():</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
</li>
<li><p>å˜é‡å<br>å˜é‡åå°½é‡å°å†™, å¦‚æœ‰å¤šä¸ªå•è¯ï¼Œç”¨ä¸‹åˆ’çº¿éš”å¼€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    count = 0</span><br><span class="line">    school_name = &apos;&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¸¸é‡<br>å¸¸é‡é‡‡ç”¨å…¨å¤§å†™ï¼Œå¦‚æœ‰å¤šä¸ªå•è¯ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿éš”å¼€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MAX_CLIENT = 100</span><br><span class="line">MAX_CONNECTION = 1000</span><br><span class="line">CONNECTION_TIMEOUT = 600</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><ul>
<li>Numbersï¼ˆæ•°å­—ï¼‰<ul>
<li>intï¼ˆæœ‰ç¬¦å·æ•´å‹ï¼‰</li>
<li>longï¼ˆé•¿æ•´å‹[ä¹Ÿå¯ä»¥ä»£è¡¨å…«è¿›åˆ¶å’Œåå…­è¿›åˆ¶]ï¼‰</li>
<li>floatï¼ˆæµ®ç‚¹å‹ï¼‰</li>
<li>complexï¼ˆå¤æ•°ï¼‰</li>
</ul>
</li>
<li>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</li>
<li>Listï¼ˆåˆ—è¡¨ï¼‰</li>
<li>Tupleï¼ˆå…ƒç»„ï¼‰</li>
<li>Dictionaryï¼ˆå­—å…¸ï¼‰</li>
</ul>
<h3 id="è¯­æ³•ç»“æ„"><a href="#è¯­æ³•ç»“æ„" class="headerlink" title="è¯­æ³•ç»“æ„"></a>è¯­æ³•ç»“æ„</h3><ul>
<li><p>é€»è¾‘è¿ç®—ç¬¦</p>
<p>ä»¥ä¸‹å‡è®¾å˜é‡ a ä¸º 10, bä¸º 20:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>é€»è¾‘è¡¨è¾¾å¼</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>and</td>
<td>x and y</td>
<td>å¸ƒå°”â€ä¸â€ - å¦‚æœ x ä¸º Falseï¼Œx and y è¿”å› Falseï¼Œå¦åˆ™å®ƒè¿”å› y çš„è®¡ç®—å€¼ã€‚</td>
<td>(a and b) è¿”å› 20ã€‚</td>
</tr>
<tr>
<td>or</td>
<td>x or y</td>
<td>å¸ƒå°”â€æˆ–â€ - å¦‚æœ x æ˜¯é 0ï¼Œå®ƒè¿”å› x çš„å€¼ï¼Œå¦åˆ™å®ƒè¿”å› y çš„è®¡ç®—å€¼ã€‚</td>
<td>(a or b) è¿”å› 10ã€‚</td>
</tr>
<tr>
<td>not</td>
<td>not x</td>
<td>å¸ƒå°”â€éâ€ - å¦‚æœ x ä¸º Trueï¼Œè¿”å› False ã€‚å¦‚æœ x ä¸º Falseï¼Œå®ƒè¿”å› Trueã€‚</td>
<td>not(a and b) è¿”å› False</td>
</tr>
</tbody>
</table>
<ul>
<li>æˆå‘˜è¿ç®—ç¬¦</li>
</ul>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>in</td>
<td>å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ‰¾åˆ°å€¼è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseã€‚</td>
<td>x åœ¨ yåºåˆ—ä¸­ , å¦‚æœxåœ¨yåºåˆ—ä¸­è¿”å›Trueã€‚</td>
</tr>
<tr>
<td>not in</td>
<td>å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ²¡æœ‰æ‰¾åˆ°å€¼è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseã€‚</td>
<td>x ä¸åœ¨ yåºåˆ—ä¸­ , å¦‚æœxä¸åœ¨yåºåˆ—ä¸­è¿”å›True</td>
</tr>
</tbody>
</table>
<ul>
<li><p>èº«ä»½è¿ç®—ç¬¦</p>
<p>èº«ä»½è¿ç®—ç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å­˜å‚¨å•å…ƒ</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>is</td>
<td>isæ˜¯åˆ¤æ–­ä¸¤ä¸ªæ ‡è¯†ç¬¦æ˜¯ä¸æ˜¯å¼•ç”¨è‡ªä¸€ä¸ªå¯¹è±¡</td>
<td>x is y, å¦‚æœ id(x) ç­‰äº id(y) , is è¿”å›ç»“æœ 1</td>
</tr>
<tr>
<td>is not</td>
<td>is notæ˜¯åˆ¤æ–­ä¸¤ä¸ªæ ‡è¯†ç¬¦æ˜¯ä¸æ˜¯å¼•ç”¨è‡ªä¸åŒå¯¹è±¡</td>
<td>x is not y, å¦‚æœ id(x) ä¸ç­‰äº id(y). is not è¿”å›ç»“æœ 1</td>
</tr>
</tbody>
</table>
<ul>
<li>if<br>åˆ†æ”¯è¯­å¥ï¼Œåœ¨pythonä¸­æ²¡æœ‰switchè¯­å¥</li>
<li>for<br>å¾ªç¯è¯­å¥<br>for x in Array : do</li>
<li>while<br>ç‰¹æ®Šçš„æ˜¯å¯ä»¥åœ¨æœ€åæ·»åŠ elseè¯­å¥</li>
</ul>
<h3 id="å˜é‡ã€å‡½æ•°å®šä¹‰"><a href="#å˜é‡ã€å‡½æ•°å®šä¹‰" class="headerlink" title="å˜é‡ã€å‡½æ•°å®šä¹‰"></a>å˜é‡ã€å‡½æ•°å®šä¹‰</h3><p>å˜é‡ç›´æ¥å®šä¹‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = 3</span><br><span class="line">b = 2</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°å®šä¹‰ä½¿ç”¨defå…³é”®å­—ï¼Œå‡½æ•°ä½œç”¨åŸŸä½¿ç”¨ç¼©è¿›è¡¨ç¤º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def fun():</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°çš„å‚æ•°å¯ä»¥èµ‹ä»¥é»˜è®¤å€¼ï¼Œæ‰€ä»¥pythonä¸­ä¸éœ€è¦å‡½æ•°é‡è½½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def fun(param1=&quot;value1&quot;,param2=&quot;value2&quot;):</span><br><span class="line">    print(&quot;params is &#123;&#125; and &#123;&#125;&quot;.format(param1,param2))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun(param2=&quot;ä¼ å…¥çš„å‚æ•°2&quot;)</span><br><span class="line"></span><br><span class="line">fun(&quot;ä¼ å…¥å‚æ•°ä¸€&quot;,&quot;ä¼ å…¥å‚æ•°äºŒ&quot;)</span><br></pre></td></tr></table></figure>
<h2 id="Python-ç®€å•çˆ¬è™«åŸºç¡€"><a href="#Python-ç®€å•çˆ¬è™«åŸºç¡€" class="headerlink" title="Python ç®€å•çˆ¬è™«åŸºç¡€"></a>Python ç®€å•çˆ¬è™«åŸºç¡€</h2><ul>
<li><p>python ç½‘ç»œåº“ urllib<br>urllib æ˜¯ python å†…ç½®çš„ http è¯·æ±‚åº“ï¼Œå†…ç½®çš„ä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<pre><code>urllib.request :è¯·æ±‚æ¨¡å—
urllib.error :å¼‚å¸¸å¤„ç†æ¨¡å—
urllib.parse :urlè§£ææ¨¡å—
urllib.robotparer :robot.txtè§£ææ¨¡å—
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line">response = urllib.request.urlopen(&apos;http://www.baidu.com&apos;)</span><br><span class="line"># responseå¾—åˆ°çš„æ˜¯ç½‘é¡µçš„å†…å®¹ï¼Œbytesç±»å‹çš„æ•°æ®ï¼Œéœ€è¦ç”¨utf-8è½¬ä¸ºå­—ç¬¦ä¸²æ ¼å¼</span><br><span class="line">print(response.read().decode(&apos;utf-8&apos;))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import urllib.parse</span><br><span class="line">import urllib.request</span><br><span class="line"># ä¼ å…¥çš„dataå‚æ•°éœ€è¦bytesç±»å‹</span><br><span class="line">data = bytes(urllib.parse.urlencode(&#123;&apos;word&apos;: &apos;hello&apos;&#125;), encoding=&apos;utf8&apos;)</span><br><span class="line">response = urllib.request.urlopen(&apos;http://httpbin.org/post&apos;, data=data)</span><br><span class="line">print(response.read())</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line">import urllib.parse</span><br><span class="line">import urllib.error</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">#url = &apos;https://python.org/&apos;</span><br><span class="line">url = &apos;http://httbin.org/post&apos;</span><br><span class="line"></span><br><span class="line">data = bytes(urllib.parse.urlencode(&#123;&apos;hello&apos;:&apos;world&apos;&#125;),encoding = &apos;utf8&apos;)</span><br><span class="line"></span><br><span class="line">headers = &#123;&quot;User-Agent&quot;:&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36&quot;&#125;</span><br><span class="line"></span><br><span class="line">req = urllib.request.Request(url,headers = headers,data = data,method = &apos;POST&apos;)</span><br><span class="line">try:</span><br><span class="line">    res = urllib.request.urlopen(req,timeout = 1)</span><br><span class="line">    print(res.read().decode(&apos;utf-8&apos;))</span><br><span class="line">    print(&apos;OJBK&apos;)</span><br><span class="line">except urllib.error.URLError as e:</span><br><span class="line">    if isinstance(e.reason,socket.timeout):</span><br><span class="line">        print(&apos;TIMEOUT&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Python-ç½‘ç»œåº“-requests"><a href="#Python-ç½‘ç»œåº“-requests" class="headerlink" title="Python ç½‘ç»œåº“ requests"></a>Python ç½‘ç»œåº“ requests</h3><p>  å‘é€è¯·æ±‚<br>  ä½¿ç”¨ Requests å‘é€ç½‘ç»œè¯·æ±‚éå¸¸ç®€å•ã€‚</p>
<p>  ä¸€å¼€å§‹è¦å¯¼å…¥ Requests æ¨¡å—ï¼š</p>
<pre><code>&gt;&gt;&gt; import requests
&gt;&gt;&gt; ç„¶åï¼Œå°è¯•è·å–æŸä¸ªç½‘é¡µã€‚æœ¬ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¥è·å– Github çš„å…¬å…±æ—¶é—´çº¿ï¼š

&gt;&gt;&gt; r = requests.get(&apos;https://api.github.com/events&apos;)
&gt;&gt;&gt; ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º r çš„ Response å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªå¯¹è±¡ä¸­è·å–æ‰€æœ‰æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚
</code></pre><p>  Requests ç®€ä¾¿çš„ API æ„å‘³ç€æ‰€æœ‰ HTTP è¯·æ±‚ç±»å‹éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·å‘é€ä¸€ä¸ª HTTP POST è¯·æ±‚ï¼š</p>
<pre><code>&gt;&gt;&gt; r = requests.post(&apos;http://httpbin.org/post&apos;, data = {&apos;key&apos;:&apos;value&apos;})
&gt;&gt;&gt; æ¼‚äº®ï¼Œå¯¹å§ï¼Ÿé‚£ä¹ˆå…¶ä»– HTTP è¯·æ±‚ç±»å‹ï¼šPUTï¼ŒDELETEï¼ŒHEAD ä»¥åŠ OPTIONS åˆæ˜¯å¦‚ä½•çš„å‘¢ï¼Ÿéƒ½æ˜¯ä¸€æ ·çš„ç®€å•ï¼š

&gt;&gt;&gt; r = requests.put(&apos;http://httpbin.org/put&apos;, data = {&apos;key&apos;:&apos;value&apos;})
&gt;&gt;&gt; r = requests.delete(&apos;http://httpbin.org/delete&apos;)
&gt;&gt;&gt; r = requests.head(&apos;http://httpbin.org/get&apos;)
&gt;&gt;&gt; r = requests.options(&apos;http://httpbin.org/get&apos;)
&gt;&gt;&gt; éƒ½å¾ˆä¸é”™å§ï¼Œä½†è¿™ä¹Ÿä»…æ˜¯ Requests çš„å†°å±±ä¸€è§’å‘¢ã€‚
</code></pre><p>  ä¼ é€’ URL å‚æ•°<br>  ä½ ä¹Ÿè®¸ç»å¸¸æƒ³ä¸º URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²(query string)ä¼ é€’æŸç§æ•°æ®ã€‚å¦‚æœä½ æ˜¯æ‰‹å·¥æ„å»º URLï¼Œé‚£ä¹ˆæ•°æ®ä¼šä»¥é”®/å€¼å¯¹çš„å½¢å¼ç½®äº URL ä¸­ï¼Œè·Ÿåœ¨ä¸€ä¸ªé—®å·çš„åé¢ã€‚ä¾‹å¦‚ï¼Œ httpbin.org/get?key=valã€‚ Requests å…è®¸ä½ ä½¿ç”¨ params å…³é”®å­—å‚æ•°ï¼Œä»¥ä¸€ä¸ªå­—ç¬¦ä¸²å­—å…¸æ¥æä¾›è¿™äº›å‚æ•°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ æƒ³ä¼ é€’ key1=value1 å’Œ key2=value2 åˆ° httpbin.org/get ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code>&gt;&gt;&gt; payload = {&apos;key1&apos;: &apos;value1&apos;, &apos;key2&apos;: &apos;value2&apos;}
&gt;&gt;&gt; r = requests.get(&quot;http://httpbin.org/get&quot;, params=payload)
&gt;&gt;&gt; é€šè¿‡æ‰“å°è¾“å‡ºè¯¥ URLï¼Œä½ èƒ½çœ‹åˆ° URL å·²è¢«æ­£ç¡®ç¼–ç ï¼š

&gt;&gt;&gt; print(r.url)
&gt;&gt;&gt; http://httpbin.org/get?key2=value2&amp;key1=value1
&gt;&gt;&gt; æ³¨æ„å­—å…¸é‡Œå€¼ä¸º None çš„é”®éƒ½ä¸ä¼šè¢«æ·»åŠ åˆ° URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²é‡Œã€‚
</code></pre><p>  ä½ è¿˜å¯ä»¥å°†ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå€¼ä¼ å…¥ï¼š</p>
<pre><code>&gt;&gt;&gt; payload = {&apos;key1&apos;: &apos;value1&apos;, &apos;key2&apos;: [&apos;value2&apos;, &apos;value3&apos;]}

&gt;&gt;&gt; r = requests.get(&apos;http://httpbin.org/get&apos;, params=payload)
&gt;&gt;&gt; print(r.url)
&gt;&gt;&gt; http://httpbin.org/get?key1=value1&amp;key2=value2&amp;key2=value3
&gt;&gt;&gt; å“åº”å†…å®¹
&gt;&gt;&gt; æˆ‘ä»¬èƒ½è¯»å–æœåŠ¡å™¨å“åº”çš„å†…å®¹ã€‚å†æ¬¡ä»¥ GitHub æ—¶é—´çº¿ä¸ºä¾‹ï¼š

&gt;&gt;&gt; import requests
&gt;&gt;&gt; r = requests.get(&apos;https://api.github.com/events&apos;)
&gt;&gt;&gt; r.text
&gt;&gt;&gt; u&apos;[{&quot;repository&quot;:{&quot;open_issues&quot;:0,&quot;url&quot;:&quot;https://github.com/...
&gt;&gt;&gt; Requests ä¼šè‡ªåŠ¨è§£ç æ¥è‡ªæœåŠ¡å™¨çš„å†…å®¹ã€‚å¤§å¤šæ•° unicode å­—ç¬¦é›†éƒ½èƒ½è¢«æ— ç¼åœ°è§£ç ã€‚
</code></pre><p>  è¯·æ±‚å‘å‡ºåï¼ŒRequests ä¼šåŸºäº HTTP å¤´éƒ¨å¯¹å“åº”çš„ç¼–ç ä½œå‡ºæœ‰æ ¹æ®çš„æ¨æµ‹ã€‚å½“ä½ è®¿é—® r.text ä¹‹æ—¶ï¼ŒRequests ä¼šä½¿ç”¨å…¶æ¨æµ‹çš„æ–‡æœ¬ç¼–ç ã€‚ä½ å¯ä»¥æ‰¾å‡º Requests ä½¿ç”¨äº†ä»€ä¹ˆç¼–ç ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨ r.encoding å±æ€§æ¥æ”¹å˜å®ƒï¼š</p>
<pre><code>&gt;&gt;&gt; r.encoding
&gt;&gt;&gt; &apos;utf-8&apos;
&gt;&gt;&gt; r.encoding = &apos;ISO-8859-1&apos;
&gt;&gt;&gt; å¦‚æœä½ æ”¹å˜äº†ç¼–ç ï¼Œæ¯å½“ä½ è®¿é—® r.text ï¼ŒRequest éƒ½å°†ä¼šä½¿ç”¨ r.encoding çš„æ–°å€¼ã€‚ä½ å¯èƒ½å¸Œæœ›åœ¨ä½¿ç”¨ç‰¹æ®Šé€»è¾‘è®¡ç®—å‡ºæ–‡æœ¬çš„ç¼–ç çš„æƒ…å†µä¸‹æ¥ä¿®æ”¹ç¼–ç ã€‚æ¯”å¦‚ HTTP å’Œ XML è‡ªèº«å¯ä»¥æŒ‡å®šç¼–ç ã€‚è¿™æ ·çš„è¯ï¼Œä½ åº”è¯¥ä½¿ç”¨ r.content æ¥æ‰¾åˆ°ç¼–ç ï¼Œç„¶åè®¾ç½® r.encoding ä¸ºç›¸åº”çš„ç¼–ç ã€‚è¿™æ ·å°±èƒ½ä½¿ç”¨æ­£ç¡®çš„ç¼–ç è§£æ r.text äº†ã€‚
</code></pre><p>  åœ¨ä½ éœ€è¦çš„æƒ…å†µä¸‹ï¼ŒRequests ä¹Ÿå¯ä»¥ä½¿ç”¨å®šåˆ¶çš„ç¼–ç ã€‚å¦‚æœä½ åˆ›å»ºäº†è‡ªå·±çš„ç¼–ç ï¼Œå¹¶ä½¿ç”¨ codecs æ¨¡å—è¿›è¡Œæ³¨å†Œï¼Œä½ å°±å¯ä»¥è½»æ¾åœ°ä½¿ç”¨è¿™ä¸ªè§£ç å™¨åç§°ä½œä¸º r.encoding çš„å€¼ï¼Œ ç„¶åç”± Requests æ¥ä¸ºä½ å¤„ç†ç¼–ç ã€‚</p>
<p>  äºŒè¿›åˆ¶å“åº”å†…å®¹<br>  ä½ ä¹Ÿèƒ½ä»¥å­—èŠ‚çš„æ–¹å¼è®¿é—®è¯·æ±‚å“åº”ä½“ï¼Œå¯¹äºéæ–‡æœ¬è¯·æ±‚ï¼š</p>
<pre><code>&gt;&gt;&gt; r.content
&gt;&gt;&gt; b&apos;[{&quot;repository&quot;:{&quot;open_issues&quot;:0,&quot;url&quot;:&quot;https://github.com/...
&gt;&gt;&gt; Requests ä¼šè‡ªåŠ¨ä¸ºä½ è§£ç  gzip å’Œ deflate ä¼ è¾“ç¼–ç çš„å“åº”æ•°æ®ã€‚
</code></pre><p>  ä¾‹å¦‚ï¼Œä»¥è¯·æ±‚è¿”å›çš„äºŒè¿›åˆ¶æ•°æ®åˆ›å»ºä¸€å¼ å›¾ç‰‡ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code>&gt;&gt;&gt; from PIL import Image
&gt;&gt;&gt; from io import BytesIO

&gt;&gt;&gt; i = Image.open(BytesIO(r.content))
&gt;&gt;&gt; JSON å“åº”å†…å®¹
&gt;&gt;&gt; Requests ä¸­ä¹Ÿæœ‰ä¸€ä¸ªå†…ç½®çš„ JSON è§£ç å™¨ï¼ŒåŠ©ä½ å¤„ç† JSON æ•°æ®ï¼š

&gt;&gt;&gt; import requests

&gt;&gt;&gt; r = requests.get(&apos;https://api.github.com/events&apos;)
&gt;&gt;&gt; r.json()
&gt;&gt;&gt; [{u&apos;repository&apos;: {u&apos;open_issues&apos;: 0, u&apos;url&apos;: &apos;https://github.com/...
&gt;&gt;&gt; å¦‚æœ JSON è§£ç å¤±è´¥ï¼Œ r.json() å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œå“åº”å†…å®¹æ˜¯ 401 (Unauthorized)ï¼Œå°è¯•è®¿é—® r.json() å°†ä¼šæŠ›å‡º ValueError: No JSON object could be decoded å¼‚å¸¸ã€‚
</code></pre><p>  éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæˆåŠŸè°ƒç”¨ r.json() å¹¶<strong>ä¸</strong>æ„å‘³ç€å“åº”çš„æˆåŠŸã€‚æœ‰çš„æœåŠ¡å™¨ä¼šåœ¨å¤±è´¥çš„å“åº”ä¸­åŒ…å«ä¸€ä¸ª JSON å¯¹è±¡ï¼ˆæ¯”å¦‚ HTTP 500 çš„é”™è¯¯ç»†èŠ‚ï¼‰ã€‚è¿™ç§ JSON ä¼šè¢«è§£ç è¿”å›ã€‚è¦æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œè¯·ä½¿ç”¨ r.raise_for_status() æˆ–è€…æ£€æŸ¥ r.status_code æ˜¯å¦å’Œä½ çš„æœŸæœ›ç›¸åŒã€‚</p>
<p>  åŸå§‹å“åº”å†…å®¹<br>  åœ¨ç½•è§çš„æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³è·å–æ¥è‡ªæœåŠ¡å™¨çš„åŸå§‹å¥—æ¥å­—å“åº”ï¼Œé‚£ä¹ˆä½ å¯ä»¥è®¿é—® r.rawã€‚ å¦‚æœä½ ç¡®å®æƒ³è¿™ä¹ˆå¹²ï¼Œé‚£è¯·ä½ ç¡®ä¿åœ¨åˆå§‹è¯·æ±‚ä¸­è®¾ç½®äº† stream=Trueã€‚å…·ä½“ä½ å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<pre><code>&gt;&gt;&gt; r = requests.get(&apos;https://api.github.com/events&apos;, stream=True)
&gt;&gt;&gt; r.raw
&gt;&gt;&gt; &lt;requests.packages.urllib3.response.HTTPResponse object at 0x101194810&gt;
&gt;&gt;&gt; r.raw.read(10)
&gt;&gt;&gt; &apos;\x1f\x8b\x08\x00\x00\x00\x00\x00\x00\x03&apos;
&gt;&gt;&gt; ä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ä»¥ä¸‹é¢çš„æ¨¡å¼å°†æ–‡æœ¬æµä¿å­˜åˆ°æ–‡ä»¶ï¼š

with open(filename, &apos;wb&apos;) as fd:
  for chunk in r.iter_content(chunk_size):
    fd.write(chunk)
</code></pre><p>  ä½¿ç”¨ Response.iter_content å°†ä¼šå¤„ç†å¤§é‡ä½ ç›´æ¥ä½¿ç”¨ Response.raw ä¸å¾—ä¸å¤„ç†çš„ã€‚ å½“æµä¸‹è½½æ—¶ï¼Œä¸Šé¢æ˜¯ä¼˜å…ˆæ¨èçš„è·å–å†…å®¹æ–¹å¼ã€‚ Note that chunk_size can be freely adjusted to a number that may better fit your use cases.</p>
<p>  å®šåˆ¶è¯·æ±‚å¤´<br>  å¦‚æœä½ æƒ³ä¸ºè¯·æ±‚æ·»åŠ  HTTP å¤´éƒ¨ï¼Œåªè¦ç®€å•åœ°ä¼ é€’ä¸€ä¸ª dict ç»™ headers å‚æ•°å°±å¯ä»¥äº†ã€‚</p>
<p>  ä¾‹å¦‚ï¼Œåœ¨å‰ä¸€ä¸ªç¤ºä¾‹ä¸­æˆ‘ä»¬æ²¡æœ‰æŒ‡å®š content-type:</p>
<pre><code>&gt;&gt;&gt; url = &apos;https://api.github.com/some/endpoint&apos;
&gt;&gt;&gt; headers = {&apos;user-agent&apos;: &apos;my-app/0.0.1&apos;}

&gt;&gt;&gt; r = requests.get(url, headers=headers)
&gt;&gt;&gt; æ³¨æ„: å®šåˆ¶ header çš„ä¼˜å…ˆçº§ä½äºæŸäº›ç‰¹å®šçš„ä¿¡æ¯æºï¼Œ
</code></pre><p>  å¦‚æœåœ¨ .netrc ä¸­è®¾ç½®äº†ç”¨æˆ·è®¤è¯ä¿¡æ¯ï¼Œä½¿ç”¨ headers= è®¾ç½®çš„æˆæƒå°±ä¸ä¼šç”Ÿæ•ˆã€‚è€Œå¦‚æœè®¾ç½®äº† auth= å‚æ•°ï¼Œ<code>.netrc</code> çš„è®¾ç½®å°±æ— æ•ˆäº†ã€‚<br>  å¦‚æœè¢«é‡å®šå‘åˆ°åˆ«çš„ä¸»æœºï¼Œæˆæƒ header å°±ä¼šè¢«åˆ é™¤ã€‚<br>  ä»£ç†æˆæƒ header ä¼šè¢« URL ä¸­æä¾›çš„ä»£ç†èº«ä»½è¦†ç›–æ‰ã€‚<br>  åœ¨æˆ‘ä»¬èƒ½åˆ¤æ–­å†…å®¹é•¿åº¦çš„æƒ…å†µä¸‹ï¼Œheader çš„ Content-Length ä¼šè¢«æ”¹å†™ã€‚<br>  æ›´è¿›ä¸€æ­¥è®²ï¼ŒRequests ä¸ä¼šåŸºäºå®šåˆ¶ header çš„å…·ä½“æƒ…å†µæ”¹å˜è‡ªå·±çš„è¡Œä¸ºã€‚åªä¸è¿‡åœ¨æœ€åçš„è¯·æ±‚ä¸­ï¼Œæ‰€æœ‰çš„ header ä¿¡æ¯éƒ½ä¼šè¢«ä¼ é€’è¿›å»ã€‚</p>
<p>  æ³¨æ„: æ‰€æœ‰çš„ header å€¼å¿…é¡»æ˜¯ stringã€bytestring æˆ–è€… unicodeã€‚å°½ç®¡ä¼ é€’ unicode header ä¹Ÿæ˜¯å…è®¸çš„ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšã€‚</p>
<p>  æ›´åŠ å¤æ‚çš„ POST è¯·æ±‚<br>  é€šå¸¸ï¼Œä½ æƒ³è¦å‘é€ä¸€äº›ç¼–ç ä¸ºè¡¨å•å½¢å¼çš„æ•°æ®â€”â€”éå¸¸åƒä¸€ä¸ª HTML è¡¨å•ã€‚è¦å®ç°è¿™ä¸ªï¼Œåªéœ€ç®€å•åœ°ä¼ é€’ä¸€ä¸ªå­—å…¸ç»™ data å‚æ•°ã€‚ä½ çš„æ•°æ®å­—å…¸åœ¨å‘å‡ºè¯·æ±‚æ—¶ä¼šè‡ªåŠ¨ç¼–ç ä¸ºè¡¨å•å½¢å¼ï¼š</p>
<pre><code>&gt;&gt;&gt; payload = {&apos;key1&apos;: &apos;value1&apos;, &apos;key2&apos;: &apos;value2&apos;}

&gt;&gt;&gt; r = requests.post(&quot;http://httpbin.org/post&quot;, data=payload)
&gt;&gt;&gt; print(r.text)
&gt;&gt;&gt; {
&gt;&gt;&gt; ...
&gt;&gt;&gt; &quot;form&quot;: {

    &quot;key2&quot;: &quot;value2&quot;,
    &quot;key1&quot;: &quot;value1&quot;

},
...
}
</code></pre><p>  ä½ è¿˜å¯ä»¥ä¸º data å‚æ•°ä¼ å…¥ä¸€ä¸ªå…ƒç»„åˆ—è¡¨ã€‚åœ¨è¡¨å•ä¸­å¤šä¸ªå…ƒç´ ä½¿ç”¨åŒä¸€ key çš„æ—¶å€™ï¼Œè¿™ç§æ–¹å¼å°¤å…¶æœ‰æ•ˆï¼š</p>
<pre><code>&gt;&gt;&gt; payload = ((&apos;key1&apos;, &apos;value1&apos;), (&apos;key1&apos;, &apos;value2&apos;))
&gt;&gt;&gt; r = requests.post(&apos;http://httpbin.org/post&apos;, data=payload)
&gt;&gt;&gt; print(r.text)
&gt;&gt;&gt; {
&gt;&gt;&gt; ...
&gt;&gt;&gt; &quot;form&quot;: {

    &quot;key1&quot;: [
    &quot;value1&quot;,
    &quot;value2&quot;
    ]

},
...
}
</code></pre><p>  å¾ˆå¤šæ—¶å€™ä½ æƒ³è¦å‘é€çš„æ•°æ®å¹¶éç¼–ç ä¸ºè¡¨å•å½¢å¼çš„ã€‚å¦‚æœä½ ä¼ é€’ä¸€ä¸ª string è€Œä¸æ˜¯ä¸€ä¸ª dictï¼Œé‚£ä¹ˆæ•°æ®ä¼šè¢«ç›´æ¥å‘å¸ƒå‡ºå»ã€‚</p>
<p>  ä¾‹å¦‚ï¼ŒGithub API v3 æ¥å—ç¼–ç ä¸º JSON çš„ POST/PATCH æ•°æ®ï¼š</p>
<pre><code>&gt;&gt;&gt; import json

&gt;&gt;&gt; url = &apos;https://api.github.com/some/endpoint&apos;
&gt;&gt;&gt; payload = {&apos;some&apos;: &apos;data&apos;}

&gt;&gt;&gt; r = requests.post(url, data=json.dumps(payload))
&gt;&gt;&gt; æ­¤å¤„é™¤äº†å¯ä»¥è‡ªè¡Œå¯¹ dict è¿›è¡Œç¼–ç ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ json å‚æ•°ç›´æ¥ä¼ é€’ï¼Œç„¶åå®ƒå°±ä¼šè¢«è‡ªåŠ¨ç¼–ç ã€‚è¿™æ˜¯ 2.4.2 ç‰ˆçš„æ–°åŠ åŠŸèƒ½ï¼š

&gt;&gt;&gt; url = &apos;https://api.github.com/some/endpoint&apos;
&gt;&gt;&gt; payload = {&apos;some&apos;: &apos;data&apos;}

&gt;&gt;&gt; r = requests.post(url, json=payload)
&gt;&gt;&gt; POST ä¸€ä¸ªå¤šéƒ¨åˆ†ç¼–ç (Multipart-Encoded)çš„æ–‡ä»¶
&gt;&gt;&gt; Requests ä½¿å¾—ä¸Šä¼ å¤šéƒ¨åˆ†ç¼–ç æ–‡ä»¶å˜å¾—å¾ˆç®€å•ï¼š

&gt;&gt;&gt; url = &apos;http://httpbin.org/post&apos;
&gt;&gt;&gt; files = {&apos;file&apos;: open(&apos;report.xls&apos;, &apos;rb&apos;)}

&gt;&gt;&gt; r = requests.post(url, files=files)
&gt;&gt;&gt; r.text
&gt;&gt;&gt; {
&gt;&gt;&gt; ...
&gt;&gt;&gt; &quot;files&quot;: {

    &quot;file&quot;: &quot;&lt;censored...binary...data&gt;&quot;

},
...
}
</code></pre><p>  ä½ å¯ä»¥æ˜¾å¼åœ°è®¾ç½®æ–‡ä»¶åï¼Œæ–‡ä»¶ç±»å‹å’Œè¯·æ±‚å¤´ï¼š</p>
<pre><code>&gt;&gt;&gt; url = &apos;http://httpbin.org/post&apos;
&gt;&gt;&gt; files = {&apos;file&apos;: (&apos;report.xls&apos;, open(&apos;report.xls&apos;, &apos;rb&apos;), &apos;application/vnd.ms-excel&apos;, {&apos;Expires&apos;: &apos;0&apos;})}

&gt;&gt;&gt; r = requests.post(url, files=files)
&gt;&gt;&gt; r.text
&gt;&gt;&gt; {
&gt;&gt;&gt; ...
&gt;&gt;&gt; &quot;files&quot;: {

    &quot;file&quot;: &quot;&lt;censored...binary...data&gt;&quot;

},
...
}
</code></pre><p>  å¦‚æœä½ æƒ³ï¼Œä½ ä¹Ÿå¯ä»¥å‘é€ä½œä¸ºæ–‡ä»¶æ¥æ¥æ”¶çš„å­—ç¬¦ä¸²ï¼š</p>
<pre><code>&gt;&gt;&gt; url = &apos;http://httpbin.org/post&apos;
&gt;&gt;&gt; files = {&apos;file&apos;: (&apos;report.csv&apos;, &apos;some,data,to,send\nanother,row,to,send\n&apos;)}

&gt;&gt;&gt; r = requests.post(url, files=files)
&gt;&gt;&gt; r.text
&gt;&gt;&gt; {
&gt;&gt;&gt; ...
&gt;&gt;&gt; &quot;files&quot;: {

    &quot;file&quot;: &quot;some,data,to,send\\nanother,row,to,send\\n&quot;

},
...
}
</code></pre><p>  å¦‚æœä½ å‘é€ä¸€ä¸ªéå¸¸å¤§çš„æ–‡ä»¶ä½œä¸º multipart/form-data è¯·æ±‚ï¼Œä½ å¯èƒ½å¸Œæœ›å°†è¯·æ±‚åšæˆæ•°æ®æµã€‚é»˜è®¤ä¸‹ requests ä¸æ”¯æŒ, ä½†æœ‰ä¸ªç¬¬ä¸‰æ–¹åŒ… requests-toolbelt æ˜¯æ”¯æŒçš„ã€‚ä½ å¯ä»¥é˜…è¯» toolbelt æ–‡æ¡£ æ¥äº†è§£ä½¿ç”¨æ–¹æ³•ã€‚</p>
<p>  åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å‘é€å¤šæ–‡ä»¶å‚è€ƒ é«˜çº§ç”¨æ³• ä¸€èŠ‚ã€‚</p>
<p>  è­¦å‘Š<br>  æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ç”¨äºŒè¿›åˆ¶æ¨¡å¼(binary mode)æ‰“å¼€æ–‡ä»¶ã€‚è¿™æ˜¯å› ä¸º Requests å¯èƒ½ä¼šè¯•å›¾ä¸ºä½ æä¾› Content-Length headerï¼Œåœ¨å®ƒè¿™æ ·åšçš„æ—¶å€™ï¼Œè¿™ä¸ªå€¼ä¼šè¢«è®¾ä¸ºæ–‡ä»¶çš„å­—èŠ‚æ•°ï¼ˆbytesï¼‰ã€‚å¦‚æœç”¨æ–‡æœ¬æ¨¡å¼(text mode)æ‰“å¼€æ–‡ä»¶ï¼Œå°±å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p>
<p>  å“åº”çŠ¶æ€ç <br>  æˆ‘ä»¬å¯ä»¥æ£€æµ‹å“åº”çŠ¶æ€ç ï¼š</p>
<pre><code>&gt;&gt;&gt; r = requests.get(&apos;http://httpbin.org/get&apos;)
&gt;&gt;&gt; r.status_code
&gt;&gt;&gt; 200
&gt;&gt;&gt; ä¸ºæ–¹ä¾¿å¼•ç”¨ï¼ŒRequests è¿˜é™„å¸¦äº†ä¸€ä¸ªå†…ç½®çš„çŠ¶æ€ç æŸ¥è¯¢å¯¹è±¡ï¼š

&gt;&gt;&gt; r.status_code == requests.codes.ok
&gt;&gt;&gt; True
&gt;&gt;&gt; å¦‚æœå‘é€äº†ä¸€ä¸ªé”™è¯¯è¯·æ±‚(ä¸€ä¸ª 4XX å®¢æˆ·ç«¯é”™è¯¯ï¼Œæˆ–è€… 5XX æœåŠ¡å™¨é”™è¯¯å“åº”)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Response.raise_for_status() æ¥æŠ›å‡ºå¼‚å¸¸ï¼š

&gt;&gt;&gt; bad_r = requests.get(&apos;http://httpbin.org/status/404&apos;)
&gt;&gt;&gt; bad_r.status_code
&gt;&gt;&gt; 404

&gt;&gt;&gt; bad_r.raise_for_status()
&gt;&gt;&gt; Traceback (most recent call last):
&gt;&gt;&gt; File &quot;requests/models.py&quot;, line 832, in raise_for_status
    raise http_error

    requests.exceptions.HTTPError: 404 Client Error
</code></pre><p>  ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬çš„ä¾‹å­ä¸­ r çš„ status_code æ˜¯ 200 ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ raise_for_status() æ—¶ï¼Œå¾—åˆ°çš„æ˜¯ï¼š</p>
<pre><code>&gt;&gt;&gt; r.raise_for_status()
&gt;&gt;&gt; None
&gt;&gt;&gt; ä¸€åˆ‡éƒ½æŒºå’Œè°å“ˆã€‚
</code></pre><p>  å“åº”å¤´<br>  æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä»¥ä¸€ä¸ª Python å­—å…¸å½¢å¼å±•ç¤ºçš„æœåŠ¡å™¨å“åº”å¤´ï¼š</p>
<pre><code>&gt;&gt;&gt; r.headers
&gt;&gt;&gt; {

    &apos;content-encoding&apos;: &apos;gzip&apos;,
    &apos;transfer-encoding&apos;: &apos;chunked&apos;,
    &apos;connection&apos;: &apos;close&apos;,
    &apos;server&apos;: &apos;nginx/1.0.4&apos;,
    &apos;x-runtime&apos;: &apos;148ms&apos;,
    &apos;etag&apos;: &apos;&quot;e1ca502697e5c9317743dc078f67693f&quot;&apos;,
    &apos;content-type&apos;: &apos;application/json&apos;

}
</code></pre><p>  ä½†æ˜¯è¿™ä¸ªå­—å…¸æ¯”è¾ƒç‰¹æ®Šï¼šå®ƒæ˜¯ä»…ä¸º HTTP å¤´éƒ¨è€Œç”Ÿçš„ã€‚æ ¹æ® RFC 2616ï¼Œ HTTP å¤´éƒ¨æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ã€‚</p>
<p>  å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„å¤§å†™å½¢å¼æ¥è®¿é—®è¿™äº›å“åº”å¤´å­—æ®µï¼š</p>
<pre><code>&gt;&gt;&gt; r.headers[&apos;Content-Type&apos;]
&gt;&gt;&gt; &apos;application/json&apos;

&gt;&gt;&gt; r.headers.get(&apos;content-type&apos;)
&gt;&gt;&gt; &apos;application/json&apos;
&gt;&gt;&gt; å®ƒè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šç‚¹ï¼Œé‚£å°±æ˜¯æœåŠ¡å™¨å¯ä»¥å¤šæ¬¡æ¥å—åŒä¸€ headerï¼Œæ¯æ¬¡éƒ½ä½¿ç”¨ä¸åŒçš„å€¼ã€‚ä½† Requests ä¼šå°†å®ƒä»¬åˆå¹¶ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥ç”¨ä¸€ä¸ªæ˜ å°„æ¥è¡¨ç¤ºå‡ºæ¥ï¼Œå‚è§ RFC 7230:
</code></pre><p>  A recipient MAY combine multiple header fields with the same field name into one â€œfield-name: field-valueâ€ pair, without changing the semantics of the message, by appending each subsequent field value to the combined field value in order, separated by a comma.</p>
<p>  æ¥æ”¶è€…å¯ä»¥åˆå¹¶å¤šä¸ªç›¸åŒåç§°çš„ header æ ä½ï¼ŒæŠŠå®ƒä»¬åˆä¸ºä¸€ä¸ª â€œfield-name: field-valueâ€ é…å¯¹ï¼Œå°†æ¯ä¸ªåç»­çš„æ ä½å€¼ä¾æ¬¡è¿½åŠ åˆ°åˆå¹¶çš„æ ä½å€¼ä¸­ï¼Œç”¨é€—å·éš”å¼€å³å¯ï¼Œè¿™æ ·åšä¸ä¼šæ”¹å˜ä¿¡æ¯çš„è¯­ä¹‰ã€‚</p>
<p>  Cookie<br>  å¦‚æœæŸä¸ªå“åº”ä¸­åŒ…å«ä¸€äº› cookieï¼Œä½ å¯ä»¥å¿«é€Ÿè®¿é—®å®ƒä»¬ï¼š</p>
<pre><code>&gt;&gt;&gt; url = &apos;http://example.com/some/cookie/setting/url&apos;
&gt;&gt;&gt; r = requests.get(url)

&gt;&gt;&gt; r.cookies[&apos;example_cookie_name&apos;]
&gt;&gt;&gt; &apos;example_cookie_value&apos;
&gt;&gt;&gt; è¦æƒ³å‘é€ä½ çš„ cookies åˆ°æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨ cookies å‚æ•°ï¼š

&gt;&gt;&gt; url = &apos;http://httpbin.org/cookies&apos;
&gt;&gt;&gt; cookies = dict(cookies_are=&apos;working&apos;)

&gt;&gt;&gt; r = requests.get(url, cookies=cookies)
&gt;&gt;&gt; r.text
&gt;&gt;&gt; &apos;{&quot;cookies&quot;: {&quot;cookies_are&quot;: &quot;working&quot;}}&apos;
&gt;&gt;&gt; Cookie çš„è¿”å›å¯¹è±¡ä¸º RequestsCookieJarï¼Œå®ƒçš„è¡Œä¸ºå’Œå­—å…¸ç±»ä¼¼ï¼Œä½†æ¥å£æ›´ä¸ºå®Œæ•´ï¼Œé€‚åˆè·¨åŸŸåè·¨è·¯å¾„ä½¿ç”¨ã€‚ä½ è¿˜å¯ä»¥æŠŠ Cookie Jar ä¼ åˆ° Requests ä¸­ï¼š

&gt;&gt;&gt; jar = requests.cookies.RequestsCookieJar()
&gt;&gt;&gt; jar.set(&apos;tasty_cookie&apos;, &apos;yum&apos;, domain=&apos;httpbin.org&apos;, path=&apos;/cookies&apos;)
&gt;&gt;&gt; jar.set(&apos;gross_cookie&apos;, &apos;blech&apos;, domain=&apos;httpbin.org&apos;, path=&apos;/elsewhere&apos;)
&gt;&gt;&gt; url = &apos;http://httpbin.org/cookies&apos;
&gt;&gt;&gt; r = requests.get(url, cookies=jar)
&gt;&gt;&gt; r.text
&gt;&gt;&gt; &apos;{&quot;cookies&quot;: {&quot;tasty_cookie&quot;: &quot;yum&quot;}}&apos;
&gt;&gt;&gt; é‡å®šå‘ä¸è¯·æ±‚å†å²
&gt;&gt;&gt; é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº† HEAD, Requests ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰é‡å®šå‘ã€‚
</code></pre><p>  å¯ä»¥ä½¿ç”¨å“åº”å¯¹è±¡çš„ history æ–¹æ³•æ¥è¿½è¸ªé‡å®šå‘ã€‚</p>
<p>  Response.history æ˜¯ä¸€ä¸ª Response å¯¹è±¡çš„åˆ—è¡¨ï¼Œä¸ºäº†å®Œæˆè¯·æ±‚è€Œåˆ›å»ºäº†è¿™äº›å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åˆ—è¡¨æŒ‰ç…§ä»æœ€è€åˆ°æœ€è¿‘çš„è¯·æ±‚è¿›è¡Œæ’åºã€‚</p>
<p>  ä¾‹å¦‚ï¼ŒGithub å°†æ‰€æœ‰çš„ HTTP è¯·æ±‚é‡å®šå‘åˆ° HTTPSï¼š</p>
<pre><code>&gt;&gt;&gt; r = requests.get(&apos;http://github.com&apos;)

&gt;&gt;&gt; r.url
&gt;&gt;&gt; &apos;https://github.com/&apos;

&gt;&gt;&gt; r.status_code
&gt;&gt;&gt; 200

&gt;&gt;&gt; r.history
&gt;&gt;&gt; [&lt;Response [301]&gt;]
&gt;&gt;&gt; å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ GETã€OPTIONSã€POSTã€PUTã€PATCH æˆ–è€… DELETEï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡ allow_redirects å‚æ•°ç¦ç”¨é‡å®šå‘å¤„ç†ï¼š

&gt;&gt;&gt; r = requests.get(&apos;http://github.com&apos;, allow_redirects=False)
&gt;&gt;&gt; r.status_code
&gt;&gt;&gt; 301
&gt;&gt;&gt; r.history
&gt;&gt;&gt; []
&gt;&gt;&gt; å¦‚æœä½ ä½¿ç”¨äº† HEADï¼Œä½ ä¹Ÿå¯ä»¥å¯ç”¨é‡å®šå‘ï¼š

&gt;&gt;&gt; r = requests.head(&apos;http://github.com&apos;, allow_redirects=True)
&gt;&gt;&gt; r.url
&gt;&gt;&gt; &apos;https://github.com/&apos;
&gt;&gt;&gt; r.history
&gt;&gt;&gt; [&lt;Response [301]&gt;]
&gt;&gt;&gt; è¶…æ—¶
&gt;&gt;&gt; ä½ å¯ä»¥å‘Šè¯‰ requests åœ¨ç»è¿‡ä»¥ timeout å‚æ•°è®¾å®šçš„ç§’æ•°æ—¶é—´ä¹‹ååœæ­¢ç­‰å¾…å“åº”ã€‚åŸºæœ¬ä¸Šæ‰€æœ‰çš„ç”Ÿäº§ä»£ç éƒ½åº”è¯¥ä½¿ç”¨è¿™ä¸€å‚æ•°ã€‚å¦‚æœä¸ä½¿ç”¨ï¼Œä½ çš„ç¨‹åºå¯èƒ½ä¼šæ°¸è¿œå¤±å»å“åº”ï¼š

&gt;&gt;&gt; requests.get(&apos;http://github.com&apos;, timeout=0.001)
&gt;&gt;&gt; Traceback (most recent call last):
&gt;&gt;&gt; File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
&gt;&gt;&gt; requests.exceptions.Timeout: HTTPConnectionPool(host=&apos;github.com&apos;, port=80): Request timed out. (timeout=0.001)
&gt;&gt;&gt; æ³¨æ„
&gt;&gt;&gt; timeout ä»…å¯¹è¿æ¥è¿‡ç¨‹æœ‰æ•ˆï¼Œä¸å“åº”ä½“çš„ä¸‹è½½æ— å…³ã€‚ timeout å¹¶ä¸æ˜¯æ•´ä¸ªä¸‹è½½å“åº”çš„æ—¶é—´é™åˆ¶ï¼Œè€Œæ˜¯å¦‚æœæœåŠ¡å™¨åœ¨ timeout ç§’å†…æ²¡æœ‰åº”ç­”ï¼Œå°†ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼ˆæ›´ç²¾ç¡®åœ°è¯´ï¼Œæ˜¯åœ¨ timeout ç§’å†…æ²¡æœ‰ä»åŸºç¡€å¥—æ¥å­—ä¸Šæ¥æ”¶åˆ°ä»»ä½•å­—èŠ‚çš„æ•°æ®æ—¶ï¼‰If no timeout is specified explicitly, requests do not time out.
</code></pre><p>  é”™è¯¯ä¸å¼‚å¸¸<br>  é‡åˆ°ç½‘ç»œé—®é¢˜ï¼ˆå¦‚ï¼šDNS æŸ¥è¯¢å¤±è´¥ã€æ‹’ç»è¿æ¥ç­‰ï¼‰æ—¶ï¼ŒRequests ä¼šæŠ›å‡ºä¸€ä¸ª ConnectionError å¼‚å¸¸ã€‚</p>
<p>  å¦‚æœ HTTP è¯·æ±‚è¿”å›äº†ä¸æˆåŠŸçš„çŠ¶æ€ç ï¼Œ Response.raise_for_status() ä¼šæŠ›å‡ºä¸€ä¸ª HTTPError å¼‚å¸¸ã€‚</p>
<p>  è‹¥è¯·æ±‚è¶…æ—¶ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª Timeout å¼‚å¸¸ã€‚</p>
<p>  è‹¥è¯·æ±‚è¶…è¿‡äº†è®¾å®šçš„æœ€å¤§é‡å®šå‘æ¬¡æ•°ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ª TooManyRedirects å¼‚å¸¸ã€‚</p>
<p>  æ‰€æœ‰ Requests æ˜¾å¼æŠ›å‡ºçš„å¼‚å¸¸éƒ½ç»§æ‰¿è‡ª requests.exceptions.RequestException ã€‚</p>
<h3 id="Python-ç½‘é¡µè§£æåº“-bs4"><a href="#Python-ç½‘é¡µè§£æåº“-bs4" class="headerlink" title="Python ç½‘é¡µè§£æåº“ bs4"></a>Python ç½‘é¡µè§£æåº“ bs4</h3><p>  ä¸‹é¢çš„ä¸€æ®µ HTML ä»£ç å°†ä½œä¸ºä¾‹å­è¢«å¤šæ¬¡ç”¨åˆ°.è¿™æ˜¯ çˆ±ä¸½ä¸æ¢¦æ¸¸ä»™å¢ƒçš„ çš„ä¸€æ®µå†…å®¹(ä»¥åå†…å®¹ä¸­ç®€ç§°ä¸º çˆ±ä¸½ä¸ çš„æ–‡æ¡£):</p>
<pre><code>html_doc = &quot;&quot;&quot;
\&lt;html&gt;\&lt;head&gt;\&lt;title&gt;The Dormouse&apos;s story\&lt;/title&gt;\&lt;/head&gt;
\&lt;body&gt;
\&lt;p class=&quot;title&quot;&gt;\&lt;b&gt;The Dormouse&apos;s story\&lt;/b&gt;\&lt;/p&gt;

\&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were
\&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie\&lt;/a&gt;,
\&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie\&lt;/a&gt; and
\&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie\&lt;/a&gt;;
and they lived at the bottom of a well.\&lt;/p&gt;

\&lt;p class=&quot;story&quot;&gt;...\&lt;/p&gt;
&quot;&quot;&quot;
</code></pre><p>  ä½¿ç”¨BeautifulSoupè§£æè¿™æ®µä»£ç ,èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ª BeautifulSoup çš„å¯¹è±¡,å¹¶èƒ½æŒ‰ç…§æ ‡å‡†çš„ç¼©è¿›æ ¼å¼çš„ç»“æ„è¾“å‡º:</p>
<pre><code>from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc)

print(soup.prettify())

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">  # &lt;html&gt;</span><br><span class="line">  #  &lt;head&gt;</span><br><span class="line">  #   &lt;title&gt;</span><br><span class="line">  #    The Dormouse&apos;s story</span><br><span class="line">  #   &lt;/title&gt;</span><br><span class="line">  #  &lt;/head&gt;</span><br><span class="line">  #  &lt;body&gt;</span><br><span class="line">  #   &lt;p class=&quot;title&quot;&gt;</span><br><span class="line">  #    &lt;b&gt;</span><br><span class="line">  #     The Dormouse&apos;s story</span><br><span class="line">  #    &lt;/b&gt;</span><br><span class="line">  #   &lt;/p&gt;</span><br><span class="line">  #   &lt;p class=&quot;story&quot;&gt;</span><br><span class="line">  #    Once upon a time there were three little sisters; and their names were</span><br><span class="line">  #    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">  #     Elsie</span><br><span class="line">  #    &lt;/a&gt;</span><br><span class="line">  #    ,</span><br><span class="line">  #    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;</span><br><span class="line">  #     Lacie</span><br><span class="line">  #    &lt;/a&gt;</span><br><span class="line">  #    and</span><br><span class="line">  #    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link2&quot;&gt;</span><br><span class="line">  #     Tillie</span><br><span class="line">  #    &lt;/a&gt;</span><br><span class="line">  #    ; and they lived at the bottom of a well.</span><br><span class="line">  #   &lt;/p&gt;</span><br><span class="line">  #   &lt;p class=&quot;story&quot;&gt;</span><br><span class="line">  #    ...</span><br><span class="line">  #   &lt;/p&gt;</span><br><span class="line">  #  &lt;/body&gt;</span><br><span class="line">  # &lt;/html&gt;</span><br><span class="line"></span><br><span class="line">å‡ ä¸ªç®€å•çš„æµè§ˆç»“æ„åŒ–æ•°æ®çš„æ–¹æ³•:</span><br><span class="line"></span><br><span class="line">  soup.title</span><br><span class="line">  # &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">  soup.title.name</span><br><span class="line">  # u&apos;title&apos;</span><br><span class="line"></span><br><span class="line">  soup.title.string</span><br><span class="line">  # u&apos;The Dormouse&apos;s story&apos;</span><br><span class="line"></span><br><span class="line">  soup.title.parent.name</span><br><span class="line">  # u&apos;head&apos;</span><br><span class="line"></span><br><span class="line">  soup.p</span><br><span class="line">  # &lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">  soup.p[&apos;class&apos;]</span><br><span class="line">  # u&apos;title&apos;</span><br><span class="line"></span><br><span class="line">  soup.a</span><br><span class="line">  # &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">  soup.find_all(&apos;a&apos;)</span><br><span class="line">  # [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span><br><span class="line">  #  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span><br><span class="line">  #  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span><br><span class="line"></span><br><span class="line">  soup.find(id=&quot;link3&quot;)</span><br><span class="line">  # &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">ä»æ–‡æ¡£ä¸­æ‰¾åˆ°æ‰€æœ‰aæ ‡ç­¾çš„é“¾æ¥:</span><br><span class="line"></span><br><span class="line">  for link in soup.find_all(&apos;a&apos;):</span><br><span class="line">      print(link.get(&apos;href&apos;))</span><br><span class="line">      # http://example.com/elsie</span><br><span class="line">      # http://example.com/lacie</span><br><span class="line">      # http://example.com/tillie</span><br><span class="line"></span><br><span class="line">ä»æ–‡æ¡£ä¸­è·å–æ‰€æœ‰æ–‡å­—å†…å®¹:</span><br><span class="line"></span><br><span class="line">  print(soup.get_text())</span><br><span class="line">  # The Dormouse&apos;s story</span><br><span class="line">  #</span><br><span class="line">  # The Dormouse&apos;s story</span><br><span class="line">  #</span><br><span class="line">  # Once upon a time there were three little sisters; and their names were</span><br><span class="line">  # Elsie,</span><br><span class="line">  # Lacie and</span><br><span class="line">  # Tillie;</span><br><span class="line">  # and they lived at the bottom of a well.</span><br><span class="line">  #</span><br><span class="line">  # ...</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="Python-ç½‘é¡µè§£æåº“-lxml"><a href="#Python-ç½‘é¡µè§£æåº“-lxml" class="headerlink" title="Python ç½‘é¡µè§£æåº“ lxml"></a>Python ç½‘é¡µè§£æåº“ lxml</h3><p>èœé¸Ÿxpath</p>
<blockquote>
<p><a href="http://www.runoob.com/xpath/xpath-tutorial.html" target="_blank" rel="noopener">http://www.runoob.com/xpath/xpath-tutorial.html</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#å¼•å…¥htmlè§£æåº“</span><br><span class="line">from lxml import html</span><br><span class="line"></span><br><span class="line">#è§£æä¸ºdomæ ‘ç»“æ„</span><br><span class="line">htm = html.fromstring(html_doc)</span><br><span class="line">#åˆ©ç”¨xpathè·å–ç›®æ ‡æ•°æ®ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªlistç»“æœé›†</span><br><span class="line">htm.xpath(xpath_str)</span><br></pre></td></tr></table></figure>
<h1 id="python-å®æˆ˜"><a href="#python-å®æˆ˜" class="headerlink" title="python å®æˆ˜"></a>python å®æˆ˜</h1>
    </div>
  </div>
  
    <div class="copy-right">
      <div class="markdown-body">
        <blockquote>
        
        
          æœ¬æ–‡ä½œè€… : å¯¹å…­ <br>
        
        åŸæ–‡é“¾æ¥ : <a href>http://duiliuliu.github.io/2018/03/13/pythonå­¦ä¹ /</a><br>
        ç‰ˆæƒå£°æ˜ : æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </blockquote>
      </div>
    </div>
  
  
  
    <div class="social-share" style="margin-top: -2rem" data-wechat-qrcode-title="<p>å¾®ä¿¡æ‰«ä¸€æ‰«</p>" data-wechat-qrcode-helper="<p>å¾®ä¿¡å³ä¸Šè§’, æ‰«ä¸€æ‰«åˆ†äº«</p>" data-sites="douban, google, facebook, twitter">
  <span style="color: #6b7487; font-size: 1.4rem;">åˆ†äº«åˆ°: </span>
</div>
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" async></script>
  

  
    <div id="reward">
  
    <p id="reward-meta">ä½ æˆ‘å…±å‹‰ï¼</p>
  
  <button id="reward-btn">
    
    <span>å…±å‹‰</span>
  </button>
  <div id="reward-qrcode">
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src="/images/wechat.png" alt="å¾®ä¿¡">
        <p class="qrcode-meta">å¾®ä¿¡</p>
      </div>
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src="/images/alipay.png" alt="æ”¯ä»˜å®">
        <p class="qrcode-meta">æ”¯ä»˜å®</p>
      </div>
    
  </div>

</div>

<script>
  (() => {
    let button = document.querySelector('#reward-btn'),
      qrcode = document.querySelector('#reward-qrcode'),
      display = false;
    
    button.addEventListener('click', () => {
      qrcode.style.display = display ? 'none' : 'block'
      display = !display
    }, false)
  })()
</script>
  

  <div class="article-footer">
    <div class="article-meta pull-left">
      <span>
        
          <i class="iconfont icon-06tags"></i>æ ‡ç­¾: 
          
          <span class="span--tag">
            <a href="/tags/python/">
              #python
            </a>
          </span>
          
        
      </span>
    </div>
    <div class="article-meta pull-right">
    </div>
  </div>
</div>


  <aside id="sidebar">
    <p id="sidebar-header"></p>
    <ol id="sidebar-toc"></ol>
    <img id="sidebar-icon">
  </aside>
  <script async>setTimeout(generateToc, 10);</script>


  <nav class="post-navigation">
    
    
      <div class="nav-next">
        ä¸‹ä¸€ç¯‡:
        <a href="/2018/04/01/2018-04-01-python3ç½‘ç»œçˆ¬è™«å¼€å‘å®æˆ˜_ç¬”è®°/" target="_self">python3ç½‘ç»œçˆ¬è™«å¼€å‘å®æˆ˜_ç¬”è®°</a>
        <i class="iconfont icon-next"></i>
      </div>
    
  </nav>

  
    <a href="#comment" class="comment-anchor"></a>
<div class="comment-title"><i class="iconfont icon-footprint"></i> ç•™ä¸‹è¶³è¿¹ <i class="iconfont icon-footprint"></i></div>
<div id="vcomments"></div>

<script defer>
  if( true ) {
    let path = getRealPath()
    new Valine({
      el: "#vcomments",
      appId: "VPNwETUGMJnwGnY6Pc7GaVna-gzGzoHsz",
      appKey: "niJbsuSCKuploWnG8Qvbgb5P",
      notify: false,
      verify: false,
      avatar: "robohash",
      placeholder: "æ­£ç¡®å¡«å†™é‚®ç®±, æ‰èƒ½åŠæ—¶æ”¶åˆ°å›å¤å“¦â™ª(^âˆ‡^*)",
      path
    });
  }
</script>
   

  
    <script defer>
const valineAPI = (() => {
  try {
    AV.init("VPNwETUGMJnwGnY6Pc7GaVna-gzGzoHsz", "niJbsuSCKuploWnG8Qvbgb5P");
  } catch(error) {}
  const isExist = (identity) => {
    identity = identity || getRealPath();
    let query = new AV.Query('Timer');
    return new Promise((resolve, reject) => {
      query.equalTo("identity", identity);
      query.find().then(results => {
        resolve(results.length > 0);
      }, error => reject(error));
    })
  }

  const _get = (identity) => {
    let query = null;
    if(identity && identity instanceof Array){
      let querys = [];
      for(let i = 0; i < identity.length; ++i) {
        querys[i] = new AV.Query('Timer');
        querys[i].equalTo('identity', identity[i]);
      }
      query = AV.Query.or.apply(null ,querys);
    } else {
      identity = identity || getRealPath();
      query = new AV.Query("Timer");
      query.equalTo("identity", identity);
    }

    return new Promise((resolve, reject) => {
      query.find()
      .then(results => resolve(results))
      .catch(error => reject(error))
    })
  }

  const create = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let Todo = AV.Object.extend('Timer');
      let todo = new Todo();
      todo.set("times", 1);
      todo.set("identity", identity);
      todo.save().then(res => resolve(true), error => reject(error));
    })
  }

  const update = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let query = new AV.Query('Timer');
      query.equalTo("identity", identity);
      query.find().then(todos => {
        todos.forEach(todo => {
          todo.set("times", todo.attributes.times + 1);
        });
        return AV.Object.saveAll(todos);
      }).then(todos => resolve(true), error => reject(error));
    })
  }

  return {
    isExist,
    _get,
    update,
    create
  }
})()

const calcAndWriteTimes = () => {
  let isPost = true;

  let timerAllDOM = document.querySelectorAll(".article-timer");

  if(isPost) {
    let identity = timerAllDOM[0].getAttribute("data-identity");
    valineAPI.isExist(identity)
    .then(exist => {
      if(exist) {
        return valineAPI.update(identity);
      }
      return new Promise(resolve => resolve(true));
    })
    .then( succuess => valineAPI._get(identity))
    .then( result => timerAllDOM[0].innerText = result[0].attributes.times)
    .catch(error => console.log(error.message))
    return ;
  }

  let timerDOMCache = {};

  for(let timerDOM of timerAllDOM) {
    let identity = timerDOM.getAttribute("data-identity");
    if(timerDOMCache.hasOwnProperty(identity)){
      timerDOMCache[identity].dom.push(timerDOM);
    }else{
      timerDOMCache[identity] = {
        dom: [timerDOM],
        times: undefined
      };
    }
  }

  let identities = Object.keys(timerDOMCache);
  valineAPI._get(identities).then(results => {
    for(let result of results) {
      let {identity, times} = result.attributes;
      timerDOMCache[identity].times = times;
      timerDOMCache[identity].dom.map(item => item.innerText = times);
    }
    for(let identity of identities) {
      if(timerDOMCache[identity].times){
        continue;
      }
      timerDOMCache[identity].dom.map(item => item.innerText = 1);
      valineAPI.create(identity);
    }
  }).catch(error => console.log(error.message))
}

if(true){
  calcAndWriteTimes();
}
</script>
   

</div>


      <footer>
  <p class="site-info">
    åšå®¢å·²è¿è¡Œ<span id="time-to-now"></span><span class="my-face">(â—'â—¡'â—)ï¾‰â™¥</span>
    <br>
    Created By <a href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a href="https://github.com/dongyuanxin/theme-bmw">BMW</a>  
    <br>
    
      <a href="https://www.google.com/analytics/" target="_blank">Google Analytics</a> æä¾›ç½‘ç«™ç»Ÿè®¡æœåŠ¡.  <br> 
    
  </p>
</footer>



<script>
const timeToNowDOM = document.querySelector("#time-to-now");
const startTimestamp = new Date(2018, 2, 10).getTime();

const updateTimeStr = () => {
  let offset = parseInt(
      (new Date().getTime() - startTimestamp) / 1000,
      10
    ),
    day = Math.floor(offset / 86400),
    hour = Math.floor((offset % 86400) / 3600),
    minute = Math.floor(((offset % 86400) % 3600) / 60),
    second = Math.floor(((offset % 86400) % 3600) % 60);
  timeToNowDOM.innerHTML =
    day + "å¤©" + hour + "å°æ—¶" + minute + "åˆ†é’Ÿ" + second + "ç§’";
  setTimeout(updateTimeStr, 500);
}

setTimeout(updateTimeStr, 500);
</script>


      <div class="back-to-top hidden">
  <span>
    <i class="iconfont icon-60"></i><span></span>%
  </span>
</div>

<script>
const updateIconToTop = percent => {
  let dom = document.querySelector(".back-to-top span span");
  dom.innerText = percent;
  if(percent < 1) {
    document.querySelector(".back-to-top").className = "back-to-top hidden";
  } else {
    document.querySelector(".back-to-top").className = "back-to-top";
  }
}

const handleScoll = () => {
  let isRunning = false;
  return () => {
    if (isRunning) return;
    isRunning = true;
    window.requestAnimationFrame(timestamp => {
      let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop,
        scrollHeight =
          document.documentElement.scrollHeight ||
          document.body.scrollHeight,
        clientHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight;
      isRunning = false;
      if (scrollTop <= 1) {
        updateIconToTop(0);
        return;
      }
      if (scrollTop + clientHeight >= scrollHeight) {
        updateIconToTop(100);
      } else {
        updateIconToTop(parseInt(
          100 * scrollTop / (scrollHeight - clientHeight),
          10
        ));
      }
    });
  };
}

const backToTop = () => {
  let scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop,
    delay = 10,
    time = 200;
  if (scrollTop <= 20) {
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;
    return;
  }
  let step = Math.ceil(scrollTop * delay / time);
  let timer = setInterval(() => {
    scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop;
    if (scrollTop - step <= 0) {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      clearInterval(timer);
    } else {
      document.documentElement.scrollTop = scrollTop - step;
      document.body.scrollTop = scrollTop - step;
    }
  }, delay);
}

document.addEventListener("scroll", handleScoll(), false);

document.querySelector(".back-to-top").addEventListener("click", backToTop, false);

</script>

    </div>

    
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<script>
  (() => {
    const mathjaxConfig = {
      showProcessingMessages: false, //å…³é—­jsåŠ è½½è¿‡ç¨‹ä¿¡æ¯
      messageStyle: "none", //ä¸æ˜¾ç¤ºä¿¡æ¯
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]], //è¡Œå†…å…¬å¼é€‰æ‹©ç¬¦
        displayMath: [["$$", "$$"], ["\\[", "\\]"]], //æ®µå†…å…¬å¼é€‰æ‹©ç¬¦
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //é¿å¼€æŸäº›æ ‡ç­¾
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], //å¯é€‰å­—ä½“
        showMathMenu: false //å…³é—­å³å‡»èœå•æ˜¾ç¤º
      }
    }

    let mathjaxInterval = setInterval(() => {
      if(!window.MathJax){
        return;
      }
      window.MathJax.Hub.Config(mathjaxConfig)
      window.MathJax.Hub.Queue(["Typeset", MathJax.Hub, document.getElementById('app')])

      clearInterval(mathjaxInterval)
    }, 10)    
  })()
</script>
    

    <script src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script>
<script async>
  let fancyTimer = setInterval(function(){
    if(!window.$){
      return;
    }
    $(document).ready(function() {
      $(".post img").each(function () {
        if($(this).parent().get(0).tagName.toLowerCase() === "a") {
          return;
        }
        // $(this).attr("data-fancybox", "gallery"); // if you add 'data-fancybox', img will display after showed
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "gallery");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      });
      
      clearInterval(fancyTimer);
    });
  }, 10);
</script>

    
  </body>

</html>
